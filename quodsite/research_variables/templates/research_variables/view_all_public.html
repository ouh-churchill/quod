<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Accordion - Default functionality</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<style>

table {
    border-collapse: collapse;
}

table, td, th {
    border: 1px solid black;
}



</style>
  
<script>
            
  $( function() {
    $( "#AccordionOuter" ).accordion({
      heightStyle: "content", collapsible: true, active: false
    });
  } );
        
</script>
  
{% for category in category_object %}
<script>
            
  $( function() {
    $( "#AccordionInner{{category.id}}" ).accordion({
      heightStyle: "content", collapsible: true, active: false
    });
  } );
        
</script>

{% endfor %} 
  
</head>

<body>

{% block content %}

<div id="AccordionOuter">
{% for category in category_object %}
<h3>{{category.name}}</h3>
<div id="AccordionInner{{category.id}}">
	{% for section in section_object %}
		{% if section.category_id == category.id %}
            <h3>{{section.name}}</h3>
            <div> 
            <table style="height:auto">
			  <col width="50">
              <col width="400">
              <col width="650">
            <tr>
			<th> ID </th>
			<th> Name </th>
			<th> Description </th>
			</tr>
			{% for variable in variable_object %}
				{% if variable.category == category.id and variable.section == section.level %}
					<tr>
						<td><center>{{variable.id }}</center></td>
						<td>{{variable.name }}</td>
						<td>{{variable.description|safe}}</td>
					</tr>
				{% endif %}
			{% endfor %}
			</table>
            </div> 

		{% endif %}

	{% endfor %}
    
</div>
   
{% endfor %}	

</div>
{% endblock %}

</body>
</html>